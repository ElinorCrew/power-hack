<!DOCTYPE html>
<html>
<head>
    <title>ElinorCrew@PowerHack2014</title>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">

    <script type='text/javascript' src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
    <script type='text/javascript' src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js" charset="utf-8"></script>
    <script type='text/javascript' src="http://knockoutjs.com/downloads/knockout-3.0.0.js" charset="utf-8"></script>

    <link rel="stylesheet" href="style/bootstrap.min.css">
    <link rel="stylesheet" href="style/bar-chart-demo.css">
    <link rel="stylesheet" href="style/gh-fork-ribbon.css">
</head>

<body>
    <div class="container">
        <div class="github-fork-ribbon-wrapper right">
            <div class="github-fork-ribbon">
                <a href="https://github.com/ElinorCrew/power-hack">Fork me on GitHub</a>
            </div>
        </div>

        <h1>ElinorCrew@PowerHack2014</h1>
        <hr class="featurette-divider">

        <p>
            Welcome to the awesomeness that is ElinorCrew@PowerHack2014. Currently this site is a collection of test code that may or may not be relevant during the actual hackathon. Anyway, this is the current setup and you should visit the GitHub page for more information about this project.
        </p>
        <p>
            This it the <a href="https://github.com/teodoran/d3-knockout-demo">d3-knockout-demo</a> and it shows a way to use <a href="http://d3js.org/">D3</a> with <a href="http://knockoutjs.com/">Knockout</a>, in order to create reusable charts, that automatically updates it's data from Knockout observables.
        </p>
        <p>
            The first example is a basic "election meter" type chart. The example is implemented as a <a href="http://knockoutjs.com/documentation/custom-bindings.html">custom binding</a>.
        </p>

        <h3>Red vs. Blue</h3>

        <div class="row">
            <div class="col-md-12 miniChart" data-bind="electionChart: electionData"></div>
        </div>

        <div class="vspace"></div>

        <h3>Line Chart</h3>
        <p>
            The second example is the good old <a href="http://bl.ocks.org/mbostock/3883245">Line Chart</a>. It automatically updates with random values from the viewmodel.
        </p>

        <div class="row">
            <div class="col-lg-12 bigChart" data-bind="lineChart: lineChartData"></div>
        </div>

        <div class="vspace"></div>

        <h3>Bar Chart</h3>
        <p>
            Finally we have the basic <a href="http://bl.ocks.org/mbostock/3885304">Bar Chart</a> example.
        </p>

        <div class="row">
            <div class="col-md-12 bigChart" data-bind='barChart: barChartData'></div>
        </div>

        <p>
            Note how the chart automatically scales to the containing element size.
        </p>

        <div class="row">
            <div class="col-md-6 smallChart" data-bind='barChart: barChartSmall1'></div>
            <div class="col-md-6 smallChart" data-bind='barChart: barChartSmall2'></div>
        </div>

        <div class="vspace"></div>

        <p>
            The source code for this demo can be found at <a href="https://github.com/teodoran/d3-knockout-demo">GitHub</a>.
        </p>

        <p>
            Good luck on on using D3 and Knockout to make your own data driven sites!
        </p>

        <div class="vspace"></div>

        <hr class="featurette-divider">

        <footer>
            <p class="pull-right"><a href="https://github.com/ElinorCrew/power-hack">GitHub</a></p>
            <p>
                ElinorCrew@PowerHack2014 &middot;
                <a href="http://folk.ntnu.no/steffenp/">Steffen Pöhner</a> &middot;
                <a href="https://twitter.com/SimenGranlund">Simen Granlund</a> &middot;
                <a href="https://github.com/georgekw">George Lee</a> &middot;
                <a href="https://twitter.com/magnuskiro">Magnus Kirø</a> &middot;
                <a href="http://folk.ntnu.no/teodoran/">Teodor Elstad</a>
            </p>
        </footer>
    </div>

    <script type='text/javascript' src='data-view-model.js'></script>
    <script type='text/javascript' src='custom-binding-handlers/bar-chart-binding.js'></script>
    <script type='text/javascript' src='custom-binding-handlers/election-binding.js'></script>
    <script type='text/javascript' src='custom-binding-handlers/line-chart-binding.js'></script>
    <script type='text/javascript' src='app.js'></script>


     <!-- TODO: remove this before prodution  -->
    <script>
        var ws;
        function socket() {
            ws = new WebSocket("ws://127.0.0.1:8080");
            ws.onmessage = function ( e ) {
                var data = JSON.parse(e.data);
                if ( data.r ) {
                    location.reload();
                }
            };
        }
        setInterval(function () {
            if ( ws ) {
                if ( ws.readyState !== 1 ) {
                    socket();
                }
            } else {
                socket();
            }
        }, 1000);
    </script>
</body>
</body>
</html>
