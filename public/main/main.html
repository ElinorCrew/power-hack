<!DOCTYPE html>
<html>
<head>
  <title>Main</title>
  <meta http-equiv="content-type" content="text/html;charset=utf-8">

  <script type='text/javascript' src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>
  <script type='text/javascript' src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.6.0/underscore-min.js" charset="utf-8"></script>
  <script type='text/javascript' src="http://knockoutjs.com/downloads/knockout-3.0.0.js" charset="utf-8"></script>
  <script type='text/javascript' src="http://code.jquery.com/jquery-1.11.0.min.js" charset="utf-8"></script>
  <script type='text/javascript' src="http://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js" charset="utf-8"></script>

  <link rel="stylesheet" href="../style/vendor/bootstrap.min.css">
  <link href="../style/sb-admin.css" rel="stylesheet">
  <link rel="stylesheet" href="../style/custom.css">
  <link rel="stylesheet" href="style/main.css">
</head>

<body>
 <div id="wrapper">

  <!-- Sidebar -->
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

    <!-- Collect the nav links, forms, and other content for toggling -->
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav side-nav">
        <img class="avatarmain img-circle" src="../style/images/inga_marte.jpg">
        <h3 class="avatartext">Inga Marte</h3>
        <p class="avatarnumber">Kundenr.: 23159124</p>

        <li class="active sidebarlinks"><span class="hdivider"></span><a href="/main"><img class="iconsize" src="../style/images/house.png"/><i class="fa fa-dashboard"></i> Min side </a></li>
        <li class="sidebarlinks"><span class="hdivider"></span><a href="/highscore"><img class="iconsize" src="../style/images/friends.png"/><i class=""></i> Mine Venner </a></li>
        <li class="sidebarlinks"><span class="hdivider"></span><a href="/achievements"><img class="iconsize" src="../style/images/ribbon.png"/><i class=""></i> Utmerkelser </a></li>
        <div class="sidebar-footer">
        <a href="https://github.com/ElinorCrew/power-hack">Github</a>
        <p>by ElinorCrew - #PowerHack2014</p>
        </div>
      </ul>

      <ul class="nav navbar-nav navbar-right navbar-user">
        <li class="dropdown user-dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i> Inga Marte Thorkildsen <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li><a href="#"><i class="fa fa-user"></i> Profil</a></li>
            <li><a href="#"><i class="fa fa-envelope"></i> Innboks <span class="badge">7</span></a></li>
            <li><a href="#"><i class="fa fa-gear"></i> Innstillinger</a></li>
            <li class="divider"></li>
            <li><a href="#"><i class="fa fa-power-off"></i> Logg ut </a></li>
          </ul>
        </li>
      </ul>
    </div><!-- /.navbar-collapse -->
  </nav>

  <div id="page-wrapper">

    <div class="slidepanel">
      <h4> Du har fått en ny utmerkelse! </h4>
      <img class="apanelicon" src="../achievements/style/images/energysavings.png"></img>
      <p>Nyttårsforsett</p>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <div class="headerbanner">
          <p class="introhead">
            Velkommen Kraftkamp.no
            <br>Stedet hvor du kan konkurrere med deg selv om å spare strøm.
          </p>
          <p class="introtext">
            Her kan du se statistikk basert på ditt strømforbruk og opparbeide deg poeng etter hvor
            flink du er til å spare strøm.
            <br />Kanskje får du en bonus også?
          </p>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-3">
       <div class="panel bar">
        <div class="miniChart" data-bind="barChart: [myCurrentPowerData, maxJsonData, 'Forskjell i ukentlig forbruk']"></div>
            <a href="#">
            <div class="panel-footer announcement-bottom">
              <div class="row">
                <div class="col-xs-6">
                  Hva er dette?
                </div>
                <div class="col-xs-6 text-right">
                  <i class="fa fa-arrow-circle-right"></i>
                </div>
              </div>
            </div>
          </a>
        </div>
      </div>

      <div class="col-lg-3">
        <div class="panel panel-warning ">
          <div class="panel-heading">
            <div class="row">
              <div class="col-xs-6">
                <i class="fa fa-check fa-5x"></i>
              </div>
              <div class="col-xs-8 col-xs-offset-4 text-right">
                <p class="announcement-heading"><span data-bind="text: quarterPowerConsumption"></span><span style="font-size:30px"> kWh</span></p>
                <p class="announcement-text">Forbruk hittil dette kvartal</p>
              </div>
            </div>
          </div>
          <a href="#">
            <div class="panel-footer announcement-bottom">
              <div class="row">
                <div class="col-xs-6">
                  Se poengberegning
                </div>
                <div class="col-xs-6 text-right">
                  <i class="fa fa-arrow-circle-right"></i>
                </div>
              </div>
            </div>
          </a>
        </div>
      </div><div class="col-lg-3">
        <div class="panel panel-warning ">
          <div class="panel-heading">
            <div class="row">
              <div class="col-xs-6">
                <i class="fa fa-check fa-5x"></i>
              </div>
              <div class="col-xs-6 text-right">
                <p class="announcement-heading" data-bind="text: myScore"></p>
                <p class="announcement-text">Total poengsum</p>
              </div>
            </div>
          </div>
          <a href="#">
            <div class="panel-footer announcement-bottom">
              <div class="row">
                <div class="col-xs-6">
                  Se poengberegning
                </div>
                <div class="col-xs-6 text-right">
                  <i class="fa fa-arrow-circle-right"></i>
                </div>
              </div>
            </div>
          </a>
        </div>
      </div>
      <div class="col-lg-3">
        <div class="panel panel-success">
          <div class="panel-heading">
            <div class="row">
              <div class="col-xs-6">
                <i class="fa fa-tasks fa-5x"></i>
              </div>
              <div class="col-xs-6 text-right">
                <p class="announcement-heading">20/24</p>
                <p class="announcement-text">Utmerkelser oppnådd</p>
              </div>
            </div>
          </div>
          <a href="#">
            <div class="panel-footer announcement-bottom">
              <div class="row">
                <div class="col-xs-6">
                  Se utmerkelser
                </div>
                <div class="col-xs-6 text-right">
                  <i class="fa fa-arrow-circle-right"></i>
                </div>
              </div>
            </div>
          </a>
        </div>
      </div>
    </div><!-- /.row -->

    <div class="row">
      <div class="col-lg-12">
        <div class="graph-header">
          <span class="big-text">Ditt ukentlig strømforbruk</span>
          <span class="color-text pull-right">Forrige ukes gjennomsnittsforbruk</span>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-12">
        <div class="bigChart" data-bind='lineChart: [jsonData, myAverageCurrentPowerData]'></div>
      </div>
    </div><!-- /.row -->
  </div><!-- /#page-wrapper -->
</div><!-- /#wrapper -->

<script src="../assets/jquery-1.10.2.js"></script>
<script src="../assets/bootstrap.min.js"></script>
<script type='text/javascript' src='js/main-view-model.js'></script>
<script type='text/javascript' src='js/bar-binding.js'></script>
<script type='text/javascript' src='js/line-chart-binding.js'></script>
<script type='text/javascript' src='js/app.js'></script>

<script>

  function animatepanelback(){
    $( ".slidepanel" ).animate({
      right: "-200px",
    }, 1000, function() {}
    );
  }

  function animatepanel(){
    $( ".slidepanel" ).animate({
      right: "0",
    }, 1000, function() {}
    );
  }

  $(document).ready(function(){
    setTimeout(function(){
      animatepanel()}, 6000);
    setTimeout(function(){
      animatepanelback()}, 12000);
  });


</script>

<!-- TODO: remove this before prodution  -->
<script>
  var ws;
  function socket() {
    ws = new WebSocket("ws://127.0.0.1:8080");
    ws.onmessage = function ( e ) {
      var data = JSON.parse(e.data);
      if ( data.r ) {
        location.reload();
      }
    };
  }
  setInterval(function () {
    if ( ws ) {
      if ( ws.readyState !== 1 ) {
        socket();
      }
    } else {
      socket();
    }
  }, 1000);
</script>
</body>
</html>
